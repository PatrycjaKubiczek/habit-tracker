(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(t,e,n){},102:function(t,e,n){},215:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(16),o=n.n(r),s=(n(101),n(102),n(7)),l=n(8),c=n(11),d=n(9),p=n(10),u=n(37),h=n(103);n(104);h.initializeApp({apiKey:"AIzaSyBczyXF8LB_35hI6awLk4lyYfjNPzN5bIo",authDomain:"habit-tracker-ade9c.firebaseapp.com",databaseURL:"https://habit-tracker-ade9c.firebaseio.com",projectId:"habit-tracker-ade9c",storageBucket:"habit-tracker-ade9c.appspot.com",messagingSenderId:"552514933256",appId:"1:552514933256:web:24f0cee2d4931841"});var b=h,m=n(219),f=n(217),g=n(218),y=n(41),w=n(19),x=n.n(w),v=(n(106),n(225)),k=n(87),E=n.n(k),j=function(t){function e(){return Object(s.a)(this,e),Object(c.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(E.a,{data:[{value:this.props.percentage,color:"#28a745",startOffset:0}],cy:50,cx:50,totalValue:100,lineWidth:20,startAngle:270,rounded:!0,label:function(t){var e=t.data,n=t.dataIndex;return Math.round(e[n].percentage)+"%"},labelStyle:{fontSize:"25px",fontFamily:"sans-serif"},labelPosition:0,style:{width:"100px",height:"100px",margin:"10px"}})}}]),e}(i.a.Component),C=n(222),O=function(t){function e(){return Object(s.a)(this,e),Object(c.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(C.a,{style:{overflowY:"auto"},show:this.props.showmodal,onHide:this.props.handleCloseModal},i.a.createElement(C.a.Header,{closeButton:!0},i.a.createElement(C.a.Title,null,"Potwierd\u017a usuni\u0119cie")),i.a.createElement(C.a.Body,null,"Czy na pewno chcesz usun\u0105\u0107 ten nawyk?"),i.a.createElement(C.a.Footer,null,i.a.createElement(v.a,{variant:"secondary",onClick:this.props.handleCloseModal},"Anuluj"),i.a.createElement(v.a,{variant:"danger",onClick:this.props.handleConfirm},"Tak")))}}]),e}(i.a.Component),T=n(91),H=n.n(T);function N(){var t=Object(u.a)(["\npadding: 20px;\nborder: 1px solid #ddd;\nmargin: 10px -10px; \nbackground: #fff;\nborder-radius: 5px;\nuser-select: none;\nbox-shadow: 0px 2px 3px rgba(0,0,0,.03), 1px 2px 2px rgba(0,0,0,.03), -1px -2px 2px rgba(0,0,0,.05);\n\n@media screen and (max-width: 769px){\n\tmargin: 10px\n}\n.col {\n\tmargin: 2px;\n\tcursor: pointer;\n    user-select: none;\n    line-height: 30px;\n}\n.fa {\n\tdisplay: none\n}\n.task {\n    border-radius: 5px;\n    background: #eee;\n\t// border: 1px solid #28a745;\n\twidth: 30px;\n\theight: 30px;\n\tflex: 0 0 30px;\n\tpadding: 0;\n\ttransition: background ease-in-out .09s\n\t&:hover {\n\t\tbackground: rgb(40, 167, 69, .5);\n\t\tcolor: #000;\n\t}\n}\n.taskDone.col{\n\tcolor: white;\n\tbackground: #28a745;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\t&:hover {\n\t\tbackground: rgb(40, 167, 69, .5);\n\t}\n}\n@media (hover: none) {\n\t.taskDone.col:hover {\n\t\tbackground: #28a745;\n\t}\n}\n.habit-title {\n\tdisplay: inline-block;\n\tmax-width: 80%;\n\tborder: 2px solid transparent;\n}\n.habit-btns {\n\tfloat: right;\n\tcolor: #ddd;\n}\n.input-title {\n\tmargin-left: -7px;\n\tpadding-left: 8px;\n\toutline: none;\n\tborder: 1px solid #007bff;\n\twidth: 75%;\n\tfont-weight: bold;\n\t@media screen and (max-width: 769px){\n\t\twidth: 60%\n\n\t}\n}\n.col__progress {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tflex-direction: column;\n\t@media screen and (max-width: 769px){\n\t\tmargin-top: 20px\n\n\t}\n} //todo export it to another folder\n.habit__wrap {\n\tmin-width: 245px;\n\tflex-wrap: wrap;\n\talignItems: center;\n\tdisplay: flex; \n}\n.title__wrap {\n\ttext-align: left;\n    min-height: 40px;\n    border-bottom: 1px solid #ddd;\n\tmargin-bottom: 15px;\n}\n"]);return N=function(){return t},t}var _=y.a.div(N()),M=function(t){function e(t){var n;Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,t))).getFormatedDaysArray=function(){for(var t=x()().daysInMonth(),e=[];t;){var n=x()().date(t).toISOString().split("T")[0];e.push(n),t--}return e.reverse()},n.checkIfActive=function(t){return!!n.props.habit.dates&&"undefined"!==typeof H()(n.props.habit.dates,{pushDate:t})},n.addDate=function(t){var e=t;n.datesFirebaseRef.push().set({pushDate:e}).then(function(){return n.addPoint()})},n.removeDate=function(t){n.datesFirebaseRef.orderByChild("pushDate").equalTo(t).once("value",function(t){var e,a=t.val();a&&(e=Object.keys(a)[0]),n.datesFirebaseRef.child(e).remove()}).then(function(){n.subtractPoint()})},n.addPoint=function(){n.props.habit.points>=0&&n.props.habit.points<=n.state.daysInMonth.length-1&&n.idHabitFirebaseRef.update({habitPoints:n.props.habit.points+1}).then(function(){n.setPercentage()})},n.subtractPoint=function(){0!==n.props.habit.points&&n.idHabitFirebaseRef.update({habitPoints:n.props.habit.points-1}).then(function(){n.setPercentage()})},n.changeIntoPercentage=function(t,e){return Math.ceil(100*t/e)},n.setPercentage=function(){var t=n.changeIntoPercentage(n.props.habit.points,x()().daysInMonth());n.setState({percentage:t})},n.handleChange=function(t){n.setState({inputHabitTitle:t.target.value})},n.editHabitTitle=function(t){n.state.editingTask?n.setState({editingTask:!1}):n.setState({editingTask:!0})},n.saveHabitTitle=function(t){0!==n.state.inputHabitTitle.length?(n.idHabitFirebaseRef.update({habitTitle:n.state.inputHabitTitle}),n.setState({editingTask:!1,errorInput:!1})):n.setState({errorInput:!0})},n.deleteHabit=function(){n.idHabitFirebaseRef.remove()},n.askToConfirmRemoval=function(){n.setState({showModal:!0})},n.confirm=function(){n.setState({confirmed:!0,showModal:!1}),n.deleteHabit()},n.handleCloseModal=function(){n.setState({showModal:!1})},n.state={daysInMonth:[],inputHabitTitle:n.props.habit.title,editingTask:!1,confirmed:!1,showModal:!1,errorInput:!1,percentage:0};var a=n.props.habit.idkey;return n.datesFirebaseRef=b.database().ref("habits/"+a).child("dates"),n.idHabitFirebaseRef=b.database().ref("habits/"+a),n}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.getFormatedDaysArray();this.setState({daysInMonth:t}),this.setPercentage()}},{key:"handleClickOnTask",value:function(t,e){e?this.removeDate(t):this.addDate(t)}},{key:"render",value:function(){var t=this,e=this.props.habit,n=this.state,a=n.daysInMonth,r=n.editingTask,o=n.inputHabitTitle,s=n.errorInput,l=n.showModal,c=n.percentage;return i.a.createElement(_,{className:"col-md-6 col-sm-12"},i.a.createElement("div",{className:"title__wrap"},i.a.createElement("p",{style:{fontWeight:"bold",marginBottom:"5px"}},!r&&i.a.createElement("span",{className:"habit-title"},e.title),r&&i.a.createElement("input",{type:"text",className:s?"input-title error":"input-title",ref:function(t){return t&&t.focus()},value:o,onChange:this.handleChange,onKeyPress:function(e){"Enter"===e.key&&t.saveHabitTitle()}}),i.a.createElement("span",{className:"habit-btns"},r?i.a.createElement(v.a,{variant:"light mr-2",size:"sm",onClick:this.saveHabitTitle,title:"zapisz"},i.a.createElement("i",{className:"fas fa-check"})):i.a.createElement(v.a,{variant:"light mr-2",size:"sm",onClick:this.editHabitTitle,title:"edytuj tytu\u0142"},i.a.createElement("i",{className:"fas fa-edit"})),i.a.createElement(v.a,{variant:"light",size:"sm",onClick:this.askToConfirmRemoval,title:"usu\u0144"},i.a.createElement("i",{className:"far fa-trash-alt"})))),i.a.createElement(O,{showmodal:l,handleConfirm:this.confirm,handleHide:this.handleHide,handleCloseModal:this.handleCloseModal})),i.a.createElement(f.a,null,i.a.createElement(g.a,{md:7,sm:12},i.a.createElement("div",{className:"habit__wrap"},a.map(function(e,n){var a=t.checkIfActive(e),r=a?"task taskDone":"task";return i.a.createElement(g.a,{key:e,className:r,"data-date":e,onClick:function(){return t.handleClickOnTask(e,a)}},n+1)}))),i.a.createElement(g.a,{className:"col__progress",md:5,sm:12},i.a.createElement("p",{className:"mb-0"},"Post\u0119p:"),i.a.createElement(j,{percentage:c}),i.a.createElement("p",null,e.points,"/30"))))}}]),e}(a.Component),I=n(220),S=function(t){function e(){return Object(s.a)(this,e),Object(c.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(m.a,{className:"container__loading"},i.a.createElement("p",null,"Wczytywanie..."),i.a.createElement(I.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Wczytywanie...")))}}]),e}(a.Component),z=n(221),P=n(224),D=function(t){function e(){return Object(s.a)(this,e),Object(c.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(z.a,{className:"mb-3"},i.a.createElement(P.a,{ref:"taskInput",placeholder:"wpisz nazw\u0119...","aria-label":"nazwa","aria-describedby":"basic-addon2",onChange:this.props.handleChange,style:{boxShadow:"none"},className:this.props.error?"error":"",value:this.props.inputHabit}),i.a.createElement(z.a.Append,null,i.a.createElement(v.a,{onClick:this.props.handleClick,style:{borderColor:"#58a4b0",backgroundColor:"#58a4b0",boxShadow:"none"}},"dodaj nowy nawyk")))}}]),e}(i.a.Component),F=n(223),R=function(t){function e(t){return Object(s.a)(this,e),Object(c.a)(this,Object(d.a)(e).call(this,t))}return Object(p.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return i.a.createElement(F.a,{style:{zIndex:"1",position:"fixed",background:"white",bottom:"20px",left:"20px"},show:this.props.showToast,onClose:this.props.handleCloseToast,autohide:!0},i.a.createElement(F.a.Header,null,i.a.createElement("strong",{className:"mr-auto"},"Stworzono nowy nawyk")))}}]),e}(i.a.Component);function A(){var t=Object(u.a)(["\n\t.col {\n\t\tmargin: 2px;\n\t\tcursor: pointer;\n\t\tuser-select: none;\n\t}\n\n\t.calendar {\n\t\tcursor: default\n\t}\n\t.error {\n\t\tborder-color: red\n\t}\n\t.row__subtitle {\n\t\twidth: 100%;\n\t\tpadding: 20px 0;\n\t\tmargin: 20px 0 0 0;\n\t\tjustify-content: space-between;\n\t\t@media screen and (max-width: 769px){\n\t\t\tjustify-content: center\n\t\t\t.col-md-6 {\n\t\t\t\tpadding: 0 !important;\n\t\t\t}\n\t\t}\n\t\th2 {\n\t\t\ttext-transform: capitalize;\n\t\t}\n\t}\n\t.container__loading {\n\t\tdisplay: flex;\n\t\tjustify-content: center; \n\t\talign-items: center; \n\t\tflex-direction: column;\n\t\theight: 90vh;\n\t}\n\t.container__app {\n\t\tmax-width: 900px;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\tpadding: 5px;\n\t}\n\t.container__habits {\n\t\tmax-width: 900px;\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tjustify-content: space-between;\n\t}\n\t.input__error {\n\t\tdisplay: block;\n\t\ttext-align: left;\n\t\tcolor: red;\n\t\tposition: absolute;\n\t\tbottom: 0\n\t}\n"]);return A=function(){return t},t}var B=y.a.div(A()),W=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(c.a)(this,Object(d.a)(e).call(this,t))).setHabits=function(){b.database().ref("habits").on("value",function(t){var e=t.val(),a=[];for(var i in e)a.push({idkey:i,title:e[i].habitTitle,points:e[i].habitPoints,dates:e[i].dates});n.setState({habits:a,loading:!1})})},n.handleChangeOnInput=function(t){var e=t.target.value;n.setState({inputNewHabit:e,error:!1})},n.addNewHabit=function(t){0!==n.state.inputNewHabit.length?(b.database().ref("habits").push({habitTitle:n.state.inputNewHabit,habitPoints:0,dates:{},percentage:0}).then(n.setState({showToast:!0})),n.setState({error:!1,inputNewHabit:""})):n.setState({error:!0})},n.handleCloseToast=function(){n.setState({showToast:!1})},n.state={habits:null,loading:!0,inputNewHabit:"",error:!1,currentMonth:"",disableBtn:!1,showToast:!1},n.timeout=null,n}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.setHabits(),this.setCurrentMonth()}},{key:"componentDidUpdate",value:function(){}},{key:"setCurrentMonth",value:function(){var t=x()().format("MMMM");this.setState({currentMonth:t})}},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.error,a=t.habits,r=t.currentMonth,o=t.disableBtn,s=t.inputNewHabit,l=t.showToast;return i.a.createElement(B,null,i.a.createElement(R,{showToast:l,handleCloseToast:this.handleCloseToast}),e&&i.a.createElement(S,null),!e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,{className:"container__app"},i.a.createElement(f.a,{className:"row__subtitle"},i.a.createElement("h2",null," ",r," "),i.a.createElement(g.a,{md:6,style:{padding:"0 0 0 10px"}},i.a.createElement(D,{error:n,handleChange:this.handleChangeOnInput,handleClick:this.addNewHabit,className:o?"disabled":null,inputHabit:s}),n&&i.a.createElement("small",{className:"input__error"},"* pole jest wymagane ")))),i.a.createElement(m.a,{className:"container__habits"},a.map(function(t){return i.a.createElement(M,{habit:t,key:t.idkey})}))))}}]),e}(a.Component);var L=function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h2",{style:{margin:"20px 0"}},"Habit tracker")),i.a.createElement("main",null,i.a.createElement(W,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(214);o.a.render(i.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},96:function(t,e,n){t.exports=n(215)}},[[96,1,2]]]);
//# sourceMappingURL=main.0abe7a6a.chunk.js.map