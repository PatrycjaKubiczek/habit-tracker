(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{274:function(e,t,n){e.exports=n(597)},481:function(e,t,n){},482:function(e,t,n){},597:function(e,t,n){"use strict";n.r(t);n(275),n(285);var a=n(0),r=n.n(a),i=n(53),o=n.n(i),s=(n(481),n(482),n(18)),c=n(19),l=n(21),u=n(20),d=n(22),p=n(129),h=n(64),b=n(483);n(484);b.initializeApp({apiKey:"AIzaSyBczyXF8LB_35hI6awLk4lyYfjNPzN5bIo",authDomain:"habit-tracker-ade9c.firebaseapp.com",databaseURL:"https://habit-tracker-ade9c.firebaseio.com",projectId:"habit-tracker-ade9c",storageBucket:"habit-tracker-ade9c.appspot.com",messagingSenderId:"552514933256",appId:"1:552514933256:web:24f0cee2d4931841"});var m=b,f=n(607),g=n(606),x=n(600),v=n(23),y=n(24),k=n(599);function w(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center; \n    align-items: center; \n    flex-direction: column;\n    height: 90vh;\n    "]);return w=function(){return e},e}var j=Object(y.a)(k.a)(w()),O=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(j,null,r.a.createElement("p",null,"Wczytywanie..."),r.a.createElement(x.a,{animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Wczytywanie...")))}}]),t}(a.Component),E=n(602),C=n(72),T=n.n(C),H=(n(489),n(601)),M=n(603),I=n(264),N=n.n(I),S=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{data:[{value:this.props.percentage,color:"#28a745",startOffset:0}],cy:50,cx:50,totalValue:100,lineWidth:20,startAngle:270,rounded:!0,label:function(e){var t=e.data,n=e.dataIndex;return Math.round(t[n].percentage)+"%"},labelStyle:{fontSize:"25px",fontFamily:"sans-serif"},labelPosition:0,style:{width:"100px",height:"100px",margin:"10px"}})}}]),t}(r.a.Component),P=n(265),z=n.n(P),D=n(605),F=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,{style:{overflowY:"auto"},show:this.props.showmodal,onHide:this.props.handleCloseModal},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,"Potwierd\u017a usuni\u0119cie")),r.a.createElement(D.a.Body,null,"Czy na pewno chcesz usun\u0105\u0107 ten nawyk?"),r.a.createElement(D.a.Footer,null,r.a.createElement(H.a,{variant:"secondary",onClick:this.props.handleCloseModal},"Anuluj"),r.a.createElement(H.a,{variant:"danger",onClick:this.props.handleConfirm},"Tak")))}}]),t}(r.a.Component);function B(){var e=Object(v.a)(["\nborder-radius: 5px;\nbackground: #eee;\n// border: 1px solid #28a745;\nwidth: 30px;\nheight: 30px;\nflex: 0 0 30px;\npadding: 0;\ntransition: background ease-in-out .09s;\nmargin: 2px;\ncursor: pointer;\nuser-select: none;\nline-height: 30px;\n&:hover {\n\tbackground: rgb(40, 167, 69, .5);\n\tcolor: #000;\n}\n"]);return B=function(){return e},e}function R(){var e=Object(v.a)(["\nmin-width: 245px;\nflex-wrap: wrap;\nalignItems: center;\ndisplay: flex; \n"]);return R=function(){return e},e}function A(){var e=Object(v.a)(["\ndisplay: inline-block;\nmax-width: 80%;\nborder: 2px solid transparent;\nfont-weight: bold;\nmargin-bottom: 5px;\n"]);return A=function(){return e},e}function W(){var e=Object(v.a)(["\ntext-align: left;\nmin-height: 40px;\nborder-bottom: 1px solid #ddd;\nmargin-bottom: 15px;\n"]);return W=function(){return e},e}function L(){var e=Object(v.a)(["\nfloat: right;\ncolor: #ddd;\n"]);return L=function(){return e},e}function J(){var e=Object(v.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\n@media screen and (max-width: 769px){\n\tmargin-top: 20px\n\n}\n"]);return J=function(){return e},e}function K(){var e=Object(v.a)(["\npadding: 20px;\nborder: 1px solid #ddd;\nmargin: 10px -10px; \nbackground: #fff;\nborder-radius: 5px;\nuser-select: none;\nbox-shadow: 0px 2px 3px rgba(0,0,0,.03), 1px 2px 2px rgba(0,0,0,.03), -1px -2px 2px rgba(0,0,0,.05);\n\n@media screen and (max-width: 769px){\n\tmargin: 10px\n}\n.fa {\n\tdisplay: none\n}\n.task {\n    border-radius: 5px;\n    background: #eee;\n\t// border: 1px solid #28a745;\n\twidth: 30px;\n\theight: 30px;\n\tflex: 0 0 30px;\n\tpadding: 0;\n\ttransition: background ease-in-out .09s\n\t&:hover {\n\t\tbackground: rgb(40, 167, 69, .5);\n\t\tcolor: #000;\n\t}\n}\n.taskDone.col{\n\tcolor: white;\n\tbackground: #28a745;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\t&:hover {\n\t\tbackground: rgb(40, 167, 69, .5);\n\t}\n}\n@media (hover: none) {\n\t.taskDone.col:hover {\n\t\tbackground: #28a745;\n\t}\n}\n.input-title {\n\tmargin-left: -7px;\n\tpadding-left: 8px;\n\toutline: none;\n\tborder: 1px solid #007bff;\n\twidth: 75%;\n\tfont-weight: bold;\n\t@media screen and (max-width: 769px){\n\t\twidth: 60%\n\n\t}\n}\n"]);return K=function(){return e},e}var Y=y.a.div(K()),q=Object(y.a)(E.a)(J()),U=y.a.span(L()),V=y.a.div(W()),X=y.a.span(A()),$=y.a.div(R()),_=Object(y.a)(E.a)(B()),G=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getFormatedDaysArray=function(){for(var e=T()().daysInMonth(),t=[];e;){var n=T()().date(e).toISOString().split("T")[0];t.push(n),e--}return t.reverse()},n.checkIfActive=function(e){return!!n.props.habit.dates&&"undefined"!==typeof z()(n.props.habit.dates,{pushDate:e})},n.addDate=function(e){var t=e;n.datesFirebaseRef.push().set({pushDate:t}).then(function(){return n.addPoint()})},n.removeDate=function(e){n.datesFirebaseRef.orderByChild("pushDate").equalTo(e).once("value",function(e){var t,a=e.val();a&&(t=Object.keys(a)[0]),n.datesFirebaseRef.child(t).remove()}).then(function(){n.subtractPoint()})},n.addPoint=function(){n.props.habit.points>=0&&n.props.habit.points<=n.state.daysInMonth.length-1&&n.idHabitFirebaseRef.update({habitPoints:n.props.habit.points+1}).then(function(){n.setPercentage()})},n.subtractPoint=function(){0!==n.props.habit.points&&n.idHabitFirebaseRef.update({habitPoints:n.props.habit.points-1}).then(function(){n.setPercentage()})},n.changeIntoPercentage=function(e,t){return Math.ceil(100*e/t)},n.setPercentage=function(){var e=n.changeIntoPercentage(n.props.habit.points,T()().daysInMonth());n.setState({percentage:e})},n.handleChange=function(e){n.setState({inputHabitTitle:e.target.value})},n.editHabitTitle=function(e){n.state.editingTask?n.setState({editingTask:!1}):n.setState({editingTask:!0})},n.saveHabitTitle=function(e){0!==n.state.inputHabitTitle.length?(n.idHabitFirebaseRef.update({habitTitle:n.state.inputHabitTitle}),n.setState({editingTask:!1,errorInput:!1})):n.setState({errorInput:!0})},n.deleteHabit=function(){n.idHabitFirebaseRef.remove()},n.askToConfirmRemoval=function(){n.setState({showModal:!0})},n.confirm=function(){n.setState({confirmed:!0,showModal:!1}),n.deleteHabit()},n.handleCloseModal=function(){n.setState({showModal:!1})},n.state={daysInMonth:[],inputHabitTitle:n.props.habit.title,editingTask:!1,confirmed:!1,showModal:!1,errorInput:!1,percentage:0};var a=n.props.habit.idkey;return n.datesFirebaseRef=m.database().ref("habits/"+a).child("dates"),n.idHabitFirebaseRef=m.database().ref("habits/"+a),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.getFormatedDaysArray();this.setState({daysInMonth:e}),this.setPercentage()}},{key:"handleClickOnTask",value:function(e,t){t?this.removeDate(e):this.addDate(e)}},{key:"render",value:function(){var e=this,t=this.props.habit,n=this.state,a=n.daysInMonth,i=n.editingTask,o=n.inputHabitTitle,s=n.errorInput,c=n.showModal,l=n.percentage;return r.a.createElement(Y,{className:"col-md-6 col-sm-12"},r.a.createElement(V,null,!i&&r.a.createElement(X,null,t.title),i&&r.a.createElement("input",{type:"text",className:s?"input-title error":"input-title",ref:function(e){return e&&e.focus()},value:o,onChange:this.handleChange,onKeyPress:function(t){"Enter"===t.key&&e.saveHabitTitle()}}),r.a.createElement(U,null,i?r.a.createElement(H.a,{variant:"light mr-2",size:"sm",onClick:this.saveHabitTitle,title:"zapisz tytu\u0142"},r.a.createElement("i",{className:"fas fa-check"})):r.a.createElement(H.a,{variant:"light mr-2",size:"sm",onClick:this.editHabitTitle,title:"edytuj tytu\u0142"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement(H.a,{variant:"light",size:"sm",onClick:this.askToConfirmRemoval,title:"usu\u0144 nawyk"},r.a.createElement("i",{className:"far fa-trash-alt"}))),r.a.createElement(F,{showmodal:c,handleConfirm:this.confirm,handleHide:this.handleHide,handleCloseModal:this.handleCloseModal})),r.a.createElement(M.a,null,r.a.createElement(E.a,{md:7,sm:12},r.a.createElement($,null,a.map(function(t,n){var a=e.checkIfActive(t),i=a?"task taskDone":"task";return r.a.createElement(_,{key:t,className:i,"data-date":t,onClick:function(){return e.handleClickOnTask(t,a)}},n+1)}))),r.a.createElement(q,{md:5,sm:12},r.a.createElement("p",{className:"mb-0"},"Post\u0119p:"),r.a.createElement(S,{percentage:l}),r.a.createElement("p",null,t.points,"/30"))))}}]),t}(a.Component),Q=n(604),Z=n(609),ee=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(Q.a,{className:"mb-3"},r.a.createElement(Z.a,{ref:"taskInput",placeholder:"wpisz nazw\u0119...","aria-label":"nazwa","aria-describedby":"basic-addon2",onChange:this.props.handleChange,style:{boxShadow:"none"},className:this.props.error?"error":"",value:this.props.inputHabit}),r.a.createElement(Q.a.Append,null,r.a.createElement(H.a,{onClick:this.props.handleClick,style:{borderColor:"#58a4b0",backgroundColor:"#58a4b0",boxShadow:"none"}},"dodaj nowy nawyk")))}}]),t}(r.a.Component),te=n(608),ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={show:n.props.showToast},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(te.a,{onClose:this.props.handleCloseToast,style:{zIndex:"1",position:"fixed",background:"white",bottom:"20px",left:"20px"},show:this.props.showToast,autohide:!0},r.a.createElement(te.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"Stworzono nowy nawyk")))}}]),t}(r.a.Component);function ae(){var e=Object(v.a)(["\nwidth: 100%;\npadding: 20px 0;\nmargin: 20px 0 0 0 !important\njustify-content: space-between;\n@media screen and (max-width: 769px){\n    justify-content: center\n    .col-md-6 {\n        padding: 0 !important;\n    }\n}\nh2 {\n    text-transform: capitalize;\n}\n"]);return ae=function(){return e},e}function re(){var e=Object(v.a)(["\n    max-width: 900px !important\n    display: flex;\n    justify-content: space-between;\n    padding: 5px;\n"]);return re=function(){return e},e}var ie=Object(y.a)(k.a)(re()),oe=Object(y.a)(M.a)(ae());function se(){var e=Object(v.a)(["\ndisplay: block;\ntext-align: left;\ncolor: red;\nposition: absolute;\nbottom: 0;\n"]);return se=function(){return e},e}function ce(){var e=Object(v.a)(["\n.error {\n     border-color: red\n }\n"]);return ce=function(){return e},e}function le(){var e=Object(v.a)(["\nmax-width: 900px !important;\ndisplay: flex;\nflex-wrap: wrap;\njustify-content: space-between;\n"]);return le=function(){return e},e}var ue=Object(y.a)(k.a)(le()),de=(Object(y.a)(E.a)(ce()),y.a.small(se())),pe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChangeOnInput=function(e){var t=e.target.value;n.setState({inputNewHabit:t,error:!1})},n.addNewHabit=function(e){0!==n.state.inputNewHabit.length?(m.database().ref("habits").push({habitTitle:n.state.inputNewHabit,habitPoints:0,dates:{}}).then(n.setState({showToast:!0})),n.setState({error:!1,inputNewHabit:""})):n.setState({error:!0})},n.handleCloseToast=function(){n.setState({showToast:!1})},n.state={inputNewHabit:"",error:!1,currentMonth:"",disableBtn:!1,showToast:!1},n.timeout=null,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setCurrentMonth()}},{key:"setCurrentMonth",value:function(){var e=T()().format("MMMM");this.setState({currentMonth:e})}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.currentMonth,a=e.disableBtn,i=e.inputNewHabit,o=e.showToast;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{showToast:o,handleCloseToast:this.handleCloseToast}),r.a.createElement(ie,null,r.a.createElement(oe,null,r.a.createElement("h2",null," ",n," "),r.a.createElement(E.a,{md:6,style:{padding:"0 0 0 10px"}},r.a.createElement(ee,{error:t,handleChange:this.handleChangeOnInput,handleClick:this.addNewHabit,className:a?"disabled":null,inputHabit:i}),t&&r.a.createElement(de,null,"* pole jest wymagane ")))),r.a.createElement(ue,null,this.props.habits.map(function(e){return r.a.createElement(G,{habit:e,key:e.idkey})})))}}]),t}(a.Component),he=n(610),be=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).changeIntoPercentage=function(e,t){return Math.ceil(100*n.props.habit.points/30)},n.state={now:n.changeIntoPercentage()},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{style:{textAlign:"left"}},this.props.habit.title),r.a.createElement(he.a,{variant:"success",now:this.state.now,label:"".concat(this.state.now,"%"),style:{marginBottom:"20px",color:"#000"}}))}}]),t}(r.a.Component);function me(){var e=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    padding: 20px;\n    max-width: 900px;\n    border: 1px solid #ddd;\n    background: #fff;\n    border-radius: 5px;\n    user-select: none;\n    box-shadow: 0px 2px 3px rgba(0,0,0,.03), 1px 2px 2px rgba(0,0,0,.03), -1px -2px 2px rgba(0,0,0,.03);\n    margin-top: 23px;\n"]);return me=function(){return e},e}var fe=y.a.div(me()),ge=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ie,{style:{flexDirection:"column"}},r.a.createElement(oe,null,r.a.createElement("h2",{className:"text-left"},"Statystki")),r.a.createElement(fe,null,this.props.habits.map(function(e){return r.a.createElement(be,{habit:e,key:e.idkey})})))}}]),t}(a.Component),xe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).setHabits=function(){m.database().ref("habits").on("value",function(e){var t=e.val(),a=[];for(var r in t)a.push({idkey:r,title:t[r].habitTitle,points:t[r].habitPoints,dates:t[r].dates});n.setState({habits:a,loading:!1})})},n.state={habits:null,loading:!0},n.timeout=null,n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setHabits()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.habits;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(O,null),!t&&r.a.createElement(p.a,null,r.a.createElement(f.a,{style:{backgroundColor:"#373f51"},variant:"dark"},r.a.createElement(ie,null,r.a.createElement(f.a.Brand,{href:"/habit-tracker-v1/"},"Habit tracker"),r.a.createElement(g.a,{className:"ml-auto"},r.a.createElement(p.b,{className:"nav-link",to:"/"},"Nawyki"),r.a.createElement(p.b,{className:"nav-link",to:"/stats"},"Statystyki")))),r.a.createElement(h.a,{path:"/",exact:!0,render:function(){return r.a.createElement(pe,{habits:n})}}),r.a.createElement(h.a,{path:"/stats",render:function(){return r.a.createElement(ge,{habits:n})}})))}}]),t}(a.Component);var ve=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("main",null,r.a.createElement(xe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(596);o.a.render(r.a.createElement(ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[274,1,2]]]);
//# sourceMappingURL=main.6edb536a.chunk.js.map